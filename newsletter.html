<!DOCTYPE html>
<html lang="en">
<head>
    <!-- Meta tags for proper responsive behavior and SEO -->
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="Join our Ford Model A car club for events, restoration tips, and community of vintage car enthusiasts">
    <meta name="keywords" content="Ford Model A, vintage cars, car club, classic automobiles, restoration">
    <title>Ford Model A Club - Classic Car Enthusiasts</title>
    
    <!-- Font imports for modern typography -->
    <link href="https://fonts.googleapis.com/css2?family=Playfair+Display:wght@400;700&family=Inter:wght@300;400;500;600&display=swap" rel="stylesheet">
    
    <!-- Font Awesome for icons -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">

    <!-- CSS FILES -->
    <link rel="stylesheet" href="styles.css">  <!-- Base styles first -->
    <link rel="stylesheet" href="main.css">    <!-- Main website styles -->
    
    <!-- Supabase JavaScript Client -->
    <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>

    <!-- IMPORTANT: Load shared configuration first -->
    <script src="config.js"></script>
    
</head>
<body>
    <!-- Fixed navigation header -->
    <header class="header">
        <div class="container">
            <nav class="nav-container">
                <!-- Logo with car icon -->
                <a href="#" class="logo">
                    <i class="fas fa-car-side"></i>
                    <span>Model A Club</span>
                </a>
                
                <!-- Desktop navigation menu -->
                <ul class="nav-menu">
                    <li><a href="#home">Home</a></li>
                    <li><a href="#about">About</a></li>
                    <li><a href="#events">Events</a></li>
                    <li><a href="#news">News</a></li>
                    <li><a href="#gallery">Gallery</a></li>
                    <li><a href="#membership">Join Us</a></li>
                    <li><a href="#contact">Contact</a></li>
                </ul>
                
                <!-- Mobile menu toggle button -->
                <button class="mobile-menu-toggle" onclick="toggleMobileMenu()">
                    <i class="fas fa-bars"></i>
                </button>
            </nav>
        </div>
    </header>

    <!-- Footer with additional links and information -->
    <footer class="footer">
        <div class="container">
            <div class="footer-content">
                <!-- About the club footer section -->
                <div class="footer-section">
                    <h3>About Our Club</h3>
                    <p>The Ford Model A Club has been bringing together enthusiasts of Henry Ford's successor to the Model T since 1985. We're dedicated to preserving, restoring, and enjoying these remarkable automobiles that helped shape American transportation history.</p>
                    <div class="social-links">
                        <a href="#" title="Facebook"><i class="fab fa-facebook-f"></i></a>
                        <a href="#" title="Instagram"><i class="fab fa-instagram"></i></a>
                        <a href="#" title="YouTube"><i class="fab fa-youtube"></i></a>
                        <a href="#" title="Email"><i class="fas fa-envelope"></i></a>
                    </div>
                </div>
                
                <!-- Quick links footer section -->
                <div class="footer-section">
                    <h3>Quick Links</h3>
                    <p><a href="#events">Upcoming Events</a></p>
                    <p><a href="#membership">Membership Info</a></p>
                    <p><a href="#gallery">Photo Gallery</a></p>
                    <p><a href="/newsletter">Newsletter Archive</a></p>
                    <p><a href="/bylaws">Club Bylaws</a></p>
                    <p><a href="/resources">Technical Resources</a></p>
                </div>
                
                <!-- Resources footer section -->
                <div class="footer-section">
                    <h3>Model A Resources</h3>
                    <p><a href="/parts-suppliers">Parts Suppliers</a></p>
                    <p><a href="/restoration-guides">Restoration Guides</a></p>
                    <p><a href="/maintenance-tips">Maintenance Tips</a></p>
                    <p><a href="/history">Model A History</a></p>
                    <p><a href="/technical-library">Technical Library</a></p>
                    <p><a href="/swap-meet">Parts Swap Meet</a></p>
                </div>
                
                <!-- Contact footer section -->
                <div class="footer-section">
                    <h3>Get In Touch</h3>
                    <p><i class="fas fa-envelope"></i> info@modelaclub.org</p>
                    <p><i class="fas fa-phone"></i> (555) 123-4567</p>
                    <p><i class="fas fa-map-marker-alt"></i> 123 Main Street<br>Your City, ST 12345</p>
                    <p><strong>Next Meeting:</strong><br><span id="nextMeeting">Loading...</span></p>
                </div>
            </div>
            
            <!-- Copyright and additional footer info -->
            <div class="footer-bottom">
                <p>&copy; 2025 Ford Model A Club. All rights reserved. | 
                <a href="/privacy">Privacy Policy</a> | 
                <a href="/terms">Terms of Service</a> | 
                <a href="/accessibility">Accessibility</a></p>
            </div>
        </div>
    </footer>

    <!-- JavaScript for Supabase integration and interactive functionality -->
    <script>

        // ===== EXISTING MOBILE AND UI FUNCTIONS =====
        
        // Mobile menu toggle functionality
        function toggleMobileMenu() {
            const menu = document.querySelector('.nav-menu');
            const button = document.querySelector('.mobile-menu-toggle');
            
            // Toggle active class to show/hide mobile menu
            menu.classList.toggle('active');
            
            // Change hamburger icon to X when menu is open
            const icon = button.querySelector('i');
            if (menu.classList.contains('active')) {
                icon.className = 'fas fa-times';
            } else {
                icon.className = 'fas fa-bars';
            }
        }

        // Close mobile menu when clicking on a menu link
        document.querySelectorAll('.nav-menu a').forEach(link => {
            link.addEventListener('click', () => {
                const menu = document.querySelector('.nav-menu');
                const button = document.querySelector('.mobile-menu-toggle');
                const icon = button.querySelector('i');
                
                // Close menu and reset icon
                menu.classList.remove('active');
                icon.className = 'fas fa-bars';
            });
        });

        // Show/hide Model A details based on ownership selection
        function toggleModelADetails() {
            const select = document.getElementById('modelAOwned');
            const details = document.getElementById('modelADetails');
            
            // Show details section if user owns or is restoring a Model A
            if (select.value === 'true' || select.value === 'restoring') {
                details.style.display = 'block';
                // Make fields required when visible
                document.getElementById('modelYear').required = true;
                document.getElementById('bodyStyle').required = true;
            } else {
                details.style.display = 'none';
                // Remove required attribute when hidden
                document.getElementById('modelYear').required = false;
                document.getElementById('bodyStyle').required = false;
            }
        }

        // Gallery modal functionality (placeholder for future implementation)
        function openGalleryModal(imageTitle) {
            // In a real implementation, this would open a modal with the full-size image
            alert(`Opening gallery image: ${imageTitle}\n\nIn a full implementation, this would display a modal with the selected image and navigation controls.`);
        }

        // Smooth scrolling for navigation links
        document.querySelectorAll('a[href^="#"]').forEach(anchor => {
            anchor.addEventListener('click', function (e) {
                e.preventDefault();
                const target = document.querySelector(this.getAttribute('href'));
                if (target) {
                    // Calculate offset to account for fixed header
                    const headerHeight = document.querySelector('.header').offsetHeight;
                    const targetPosition = target.offsetTop - headerHeight - 20;
                    
                    window.scrollTo({
                        top: targetPosition,
                        behavior: 'smooth'
                    });
                }
            });
        });

        // Add scroll effect to header (darken when scrolled)
        window.addEventListener('scroll', () => {
            const header = document.querySelector('.header');
            if (window.scrollY > 100) {
                header.style.backgroundColor = 'rgba(255, 255, 255, 0.95)';
                header.style.backdropFilter = 'blur(10px)';
            } else {
                header.style.backgroundColor = '#ffffff';
                header.style.backdropFilter = 'none';
            }
        });

        // Form validation enhancements
        document.querySelectorAll('input[required], select[required]').forEach(field => {
            field.addEventListener('invalid', function(e) {
                // Custom validation messages
                if (this.validity.valueMissing) {
                    this.setCustomValidity('This field is required');
                } else if (this.validity.typeMismatch && this.type === 'email') {
                    this.setCustomValidity('Please enter a valid email address');
                }
            });
            
            field.addEventListener('input', function() {
                // Clear custom validation message when user starts typing
                this.setCustomValidity('');
            });
        });

        // Statistics counter animation (runs when page loads)
        function animateCounters() {
            const counters = document.querySelectorAll('.stat-number');
            
            counters.forEach(counter => {
                const targetText = counter.textContent;
                const target = parseInt(targetText.replace('+', ''));
                const increment = target / 50; // Animation duration roughly 50 frames
                let current = 0;
                
                const timer = setInterval(() => {
                    current += increment;
                    if (current >= target) {
                        counter.textContent = targetText; // Restore original text with +
                        clearInterval(timer);
                    } else {
                        counter.textContent = Math.floor(current);
                    }
                }, 40); // Update every 40ms for smooth animation
            });
        }

        // ===== PAGE INITIALIZATION =====
        
        // Initialize all content when DOM is loaded
        document.addEventListener('DOMContentLoaded', function() {
            // Set up form submission handler
            const membershipForm = document.getElementById('membershipForm');
            if (membershipForm) {
                membershipForm.addEventListener('submit', handleMembershipSubmit);
            }
            
            // Show configuration warning if needed
            if (!isSupabaseConfigured()) {
                console.warn('🔧 SETUP REQUIRED: Please configure your Supabase credentials in the JavaScript section of this file.');
                console.warn('📍 Look for SUPABASE_URL and SUPABASE_ANON_KEY variables and replace with your actual values.');
                console.warn('📖 See the setup instructions for details on getting these values from your Supabase dashboard.');
            }
        });

        // Run counter animation when page loads
        window.addEventListener('load', () => {
            // Delay animation slightly to ensure everything is rendered
            setTimeout(animateCounters, 500);
        });

        // ===== UTILITY FUNCTIONS =====
        
        // Function to format dates consistently across the application
        function formatEventDate(dateString) {
            const date = new Date(dateString);
            return date.toLocaleDateString('en-US', { 
                weekday: 'short', 
                month: 'short', 
                day: 'numeric' 
            }).toUpperCase();
        }
        
        // Function to format times consistently across the application
        function formatEventTime(timeString) {
            if (!timeString) return 'Time TBD';
            const time = new Date(`1970-01-01T${timeString}`);
            return time.toLocaleTimeString('en-US', { 
                hour: 'numeric', 
                minute: '2-digit', 
                hour12: true 
            });
        }
        
        // Function to handle errors consistently across the application
        function handleError(error, context) {
            console.error(`Error in ${context}:`, error);
            
            // In a production environment, you might want to:
            // - Log errors to a service like Sentry
            // - Show user-friendly error messages
            // - Provide fallback content
            
            return `<div class="error-message">Unable to load ${context}. Please refresh the page or try again later.</div>`;
        }
        
        // Function to show loading state while data is being fetched
        function showLoadingState(container, message = 'Loading...') {
            container.innerHTML = `
                <div style="text-align: center; padding: 2rem;">
                    <div class="loading-spinner"></div>
                    <p style="margin-top: 1rem; color: #666;">${message}</p>
                </div>
            `;
        }
        
        // Function to validate email addresses
        function isValidEmail(email) {
            const emailRegex = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;
            return emailRegex.test(email);
        }
        
        // Log successful initialization
        console.log('🚗 Ford Model A Club website loaded successfully!');
        console.log('🔗 Database connection:', isSupabaseConfigured() ? 'Configured' : 'Demo mode');
    </script>
</body>
</html>
